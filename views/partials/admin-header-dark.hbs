<!-- Admin Header - Dark Theme -->
<div class="bg-gray-800 border-b border-gray-700">
  <div class="container mx-auto px-4 py-4 flex items-center justify-between">
    <!-- Logo and main nav -->
    <div class="flex items-center space-x-8">
      <a href="/" class="text-2xl font-bold text-white hover:text-gray-200 transition-colors">
        Tech<span class="text-cyan-500">Blog</span>
      </a>
      
      <nav class="hidden md:flex space-x-6">
        <a href="/admin/dashboard" class="text-gray-300 hover:text-white transition-colors">Dashboard</a>
        <a href="/admin/posts" class="text-gray-300 hover:text-white transition-colors">Posts</a>
        <a href="/" class="text-gray-300 hover:text-white transition-colors" >Home</a>
      </nav>
    </div>
    
    <!-- User menu -->
    <div class="flex items-center space-x-4">
      <!-- User profile dropdown -->
      <div class="relative" id="user-menu">
        <button class="flex items-center space-x-2 focus:outline-none" id="user-menu-button">
          <div class="w-8 h-8 rounded-full bg-cyan-600 flex items-center justify-center text-white font-medium">
            {{#if user.initials}}
              {{user.initials}}
            {{else}}
              AU
            {{/if}}
          </div>
          <span class="text-gray-300 hidden sm:inline">
            {{#if user.name}}
              {{user.name}}
            {{else}}
              Admin
            {{/if}}
          </span>
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
          </svg>
        </button>
        
        <!-- Dropdown menu -->
        <div class="absolute right-0 mt-2 w-48 bg-gray-800 border border-gray-700 rounded-md shadow-lg py-1 z-10 hidden" id="user-dropdown-menu">
          <form action="/logout" method="POST" class="block">
            <button type="submit" class="w-full text-left px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white transition-colors">
              Sign out
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Mobile menu (hidden by default) -->
<div class="md:hidden bg-gray-800 border-b border-gray-700 hidden" id="mobile-menu">
  <div class="container mx-auto px-4 py-3 space-y-1">
    <a href="/admin/dashboard" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 transition-colors">
      Dashboard
    </a>
    <a href="/admin/posts" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 transition-colors">
      Posts
    </a>
    <a href="/" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-gray-700 transition-colors" target="_blank">
      View Site
    </a>
  </div>
</div>

<!-- Script for mobile menu toggle and user dropdown -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Mobile menu toggle
    const mobileMenuButton = document.querySelector('[aria-controls="mobile-menu"]');
    const mobileMenu = document.getElementById('mobile-menu');
    
    if (mobileMenuButton && mobileMenu) {
      mobileMenuButton.addEventListener('click', function() {
        const expanded = this.getAttribute('aria-expanded') === 'true';
        this.setAttribute('aria-expanded', !expanded);
        mobileMenu.classList.toggle('hidden');
      });
    }

    // User dropdown menu
    const userMenuButton = document.getElementById('user-menu-button');
    const userDropdownMenu = document.getElementById('user-dropdown-menu');
    const userMenu = document.getElementById('user-menu');
    
    if (userMenuButton && userDropdownMenu) {
      let isOpen = false;
      
      userMenuButton.addEventListener('click', function() {
        isOpen = !isOpen;
        if (isOpen) {
          userDropdownMenu.classList.remove('hidden');
        } else {
          userDropdownMenu.classList.add('hidden');
        }
      });
      
      // 关闭下拉菜单的点击事件监听器（点击菜单外部区域时）
      document.addEventListener('click', function(event) {
        if (isOpen && !userMenu.contains(event.target)) {
          userDropdownMenu.classList.add('hidden');
          isOpen = false;
        }
      });
      
      // 鼠标进入菜单区域
      userMenu.addEventListener('mouseenter', function() {
        userDropdownMenu.classList.remove('hidden');
        isOpen = true;
      });
      
      // 鼠标离开菜单区域
      userMenu.addEventListener('mouseleave', function() {
        setTimeout(function() {
          if (!userDropdownMenu.matches(':hover')) {
            userDropdownMenu.classList.add('hidden');
            isOpen = false;
          }
        }, 100);
      });
      
      // 鼠标离开下拉菜单
      userDropdownMenu.addEventListener('mouseleave', function() {
        setTimeout(function() {
          if (!userMenu.matches(':hover')) {
            userDropdownMenu.classList.add('hidden');
            isOpen = false;
          }
        }, 100);
      });
    }
  });
</script> 